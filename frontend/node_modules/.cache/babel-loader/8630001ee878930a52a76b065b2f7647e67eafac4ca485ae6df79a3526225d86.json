{"ast":null,"code":"import axios from 'axios';\nimport { getToken } from './token';\nconst BACKEND_URL = 'http://localhost:5000';\nconst REQUEST_TIMEOUT = 5000;\nexport const createAPI = () => {\n  const api = axios.create({\n    baseURL: BACKEND_URL,\n    timeout: REQUEST_TIMEOUT\n  });\n  api.interceptors.request.use(config => {\n    const token = getToken();\n    if (token) {\n      config.headers['Authorization'] = `Bearer ${token}`;\n    }\n    return config;\n  });\n  api.interceptors.response.use(response => response, error => Promise.reject(error));\n  return api;\n};","map":{"version":3,"names":["axios","getToken","BACKEND_URL","REQUEST_TIMEOUT","createAPI","api","create","baseURL","timeout","interceptors","request","use","config","token","headers","response","error","Promise","reject"],"sources":["/Users/ivanmerkulov/Documents/GitHub/2109415-what-to-watch-3/frontend/src/services/api.ts"],"sourcesContent":["import axios, { AxiosRequestConfig, AxiosResponse, AxiosError } from 'axios';\nimport { getToken } from './token';\n\nconst BACKEND_URL = 'http://localhost:5000';\nconst REQUEST_TIMEOUT = 5000;\n\nexport const createAPI = () => {\n  const api = axios.create({\n    baseURL: BACKEND_URL,\n    timeout: REQUEST_TIMEOUT,\n  });\n\n  api.interceptors.request.use((config: AxiosRequestConfig) => {\n    const token = getToken();\n\n    if (token) {\n      config.headers['Authorization'] = `Bearer ${token}`;\n    }\n\n    return config;\n  });\n\n  api.interceptors.response.use(\n    (response: AxiosResponse) => response,\n\n    (error: AxiosError) => Promise.reject(error)\n  );\n\n  return api;\n};\n"],"mappings":"AAAA,OAAOA,KAAK,MAAyD,OAAO;AAC5E,SAASC,QAAQ,QAAQ,SAAS;AAElC,MAAMC,WAAW,GAAG,uBAAuB;AAC3C,MAAMC,eAAe,GAAG,IAAI;AAE5B,OAAO,MAAMC,SAAS,GAAG,MAAM;EAC7B,MAAMC,GAAG,GAAGL,KAAK,CAACM,MAAM,CAAC;IACvBC,OAAO,EAAEL,WAAW;IACpBM,OAAO,EAAEL;EACX,CAAC,CAAC;EAEFE,GAAG,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAA0B,IAAK;IAC3D,MAAMC,KAAK,GAAGZ,QAAQ,EAAE;IAExB,IAAIY,KAAK,EAAE;MACTD,MAAM,CAACE,OAAO,CAAC,eAAe,CAAC,GAAI,UAASD,KAAM,EAAC;IACrD;IAEA,OAAOD,MAAM;EACf,CAAC,CAAC;EAEFP,GAAG,CAACI,YAAY,CAACM,QAAQ,CAACJ,GAAG,CAC1BI,QAAuB,IAAKA,QAAQ,EAEpCC,KAAiB,IAAKC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAC7C;EAED,OAAOX,GAAG;AACZ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}