{"ast":null,"code":"var _jsxFileName = \"/Users/ivanmerkulov/Documents/GitHub/2109415-what-to-watch-3/frontend/src/components/register-form/register-form.tsx\",\n  _s = $RefreshSig$();\nimport { useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { AppRoute } from '../../const';\nimport { useAppDispatch } from '../../hooks';\nimport { registerUser } from '../../store/api-actions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction RegisterForm() {\n  _s();\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  const [avatar, setAvatar] = useState();\n  const nameRef = useRef(null);\n  const emailRef = useRef(null);\n  const passwordRef = useRef(null);\n  const handleAvatarUpload = evt => {\n    if (!evt.target.files) {\n      return;\n    }\n    setAvatar(evt.target.files[0]);\n  };\n  const handleSubmit = async evt => {\n    var _nameRef$current, _emailRef$current, _passwordRef$current;\n    evt.preventDefault();\n    const formData = {\n      name: (_nameRef$current = nameRef.current) === null || _nameRef$current === void 0 ? void 0 : _nameRef$current.value,\n      email: (_emailRef$current = emailRef.current) === null || _emailRef$current === void 0 ? void 0 : _emailRef$current.value,\n      password: (_passwordRef$current = passwordRef.current) === null || _passwordRef$current === void 0 ? void 0 : _passwordRef$current.value,\n      avatar\n    };\n    const response = await dispatch(registerUser(formData));\n    if (response.meta.requestStatus === 'rejected') {\n      toast.error('Can\\'t sign up');\n    } else {\n      toast.success('Success! Please sign in!');\n      navigate(AppRoute.Login);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    className: \"sign-in__form register-form\",\n    action: \"#\",\n    method: \"post\",\n    onSubmit: handleSubmit,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"sign-in__fields\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sign-in__field\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"visually-hidden sign-in__label\",\n          children: \"Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"sign-in__input\",\n          type: \"text\",\n          name: \"name\",\n          placeholder: \"Name\",\n          required: true,\n          minLength: 1,\n          maxLength: 15,\n          ref: nameRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sign-in__field\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"visually-hidden sign-in__label\",\n          children: \"E-mail\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"sign-in__input\",\n          type: \"email\",\n          name: \"email\",\n          placeholder: \"Email\",\n          required: true,\n          ref: emailRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sign-in__field\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"visually-hidden sign-in__label\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"sign-in__input\",\n          type: \"password\",\n          name: \"password\",\n          placeholder: \"Password\",\n          required: true,\n          minLength: 6,\n          maxLength: 12,\n          ref: passwordRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"`sign-in__field register-form__avatar-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"visually-hidden\",\n          type: \"file\",\n          name: \"avatar\",\n          id: \"avatar\",\n          accept: \"image/png, image/jpeg\",\n          onChange: handleAvatarUpload\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"avatar\",\n          className: \"register-form__avatar-label\",\n          children: avatar ? /*#__PURE__*/_jsxDEV(\"img\", {\n            src: URL.createObjectURL(avatar),\n            alt: \"Avatar preview\",\n            className: \"register-form__avatar-preview\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 15\n          }, this) : 'Upload avatar'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sign-in__submit\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"sign-in__btn\",\n          type: \"submit\",\n          children: \"Sign up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n}\n_s(RegisterForm, \"mT9aKNySS/coKIPmnm1N8ogl8Jk=\", false, function () {\n  return [useAppDispatch, useNavigate];\n});\n_c = RegisterForm;\nexport default RegisterForm;\nvar _c;\n$RefreshReg$(_c, \"RegisterForm\");","map":{"version":3,"names":["useState","useRef","useNavigate","toast","AppRoute","useAppDispatch","registerUser","RegisterForm","dispatch","navigate","avatar","setAvatar","nameRef","emailRef","passwordRef","handleAvatarUpload","evt","target","files","handleSubmit","preventDefault","formData","name","current","value","email","password","response","meta","requestStatus","error","success","Login","URL","createObjectURL"],"sources":["/Users/ivanmerkulov/Documents/GitHub/2109415-what-to-watch-3/frontend/src/components/register-form/register-form.tsx"],"sourcesContent":["import { ChangeEvent, useState, FormEvent, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { AppRoute } from '../../const';\nimport { useAppDispatch } from '../../hooks';\nimport { registerUser } from '../../store/api-actions';\nimport { NewUser } from '../../types/new-user';\n\nfunction RegisterForm() {\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  const [avatar, setAvatar] = useState<File | undefined>();\n  const nameRef = useRef<HTMLInputElement | null>(null);\n  const emailRef = useRef<HTMLInputElement | null>(null);\n  const passwordRef = useRef<HTMLInputElement | null>(null);\n\n  const handleAvatarUpload = (evt: ChangeEvent<HTMLInputElement>) => {\n    if (!evt.target.files) {\n      return;\n    }\n    setAvatar(evt.target.files[0]);\n  };\n\n  const handleSubmit = async (evt: FormEvent) => {\n    evt.preventDefault();\n    const formData: NewUser = {\n      name: nameRef.current?.value as string,\n      email: emailRef.current?.value as string,\n      password: passwordRef.current?.value as string,\n      avatar,\n    };\n\n    const response = await dispatch(registerUser(formData));\n    if (response.meta.requestStatus === 'rejected') {\n      toast.error('Can\\'t sign up');\n    } else {\n      toast.success('Success! Please sign in!');\n      navigate(AppRoute.Login);\n    }\n  };\n\n  return (\n    <form\n      className=\"sign-in__form register-form\"\n      action=\"#\"\n      method=\"post\"\n      onSubmit={handleSubmit}\n    >\n      <div className=\"sign-in__fields\">\n        <div className=\"sign-in__field\">\n          <label className=\"visually-hidden sign-in__label\">Name</label>\n          <input\n            className=\"sign-in__input\"\n            type=\"text\"\n            name=\"name\"\n            placeholder=\"Name\"\n            required\n            minLength={1}\n            maxLength={15}\n            ref={nameRef}\n          />\n        </div>\n        <div className=\"sign-in__field\">\n          <label className=\"visually-hidden sign-in__label\">E-mail</label>\n          <input\n            className=\"sign-in__input\"\n            type=\"email\"\n            name=\"email\"\n            placeholder=\"Email\"\n            required\n            ref={emailRef}\n          />\n        </div>\n        <div className=\"sign-in__field\">\n          <label className=\"visually-hidden sign-in__label\">Password</label>\n          <input\n            className=\"sign-in__input\"\n            type=\"password\"\n            name=\"password\"\n            placeholder=\"Password\"\n            required\n            minLength={6}\n            maxLength={12}\n            ref={passwordRef}\n          />\n        </div>\n        <div className=\"`sign-in__field register-form__avatar-wrapper\">\n          <input\n            className=\"visually-hidden\"\n            type=\"file\"\n            name=\"avatar\"\n            id=\"avatar\"\n            accept=\"image/png, image/jpeg\"\n            onChange={handleAvatarUpload}\n          />\n          <label htmlFor=\"avatar\" className=\"register-form__avatar-label\">\n            {avatar ? (\n              <img\n                src={URL.createObjectURL(avatar)}\n                alt=\"Avatar preview\"\n                className=\"register-form__avatar-preview\"\n              />\n            ) : (\n              'Upload avatar'\n            )}\n          </label>\n        </div>\n        <div className=\"sign-in__submit\">\n          <button className=\"sign-in__btn\" type=\"submit\">\n            Sign up\n          </button>\n        </div>\n      </div>\n    </form>\n  );\n}\n\nexport default RegisterForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}