{"ast":null,"code":"var _jsxFileName = \"/Users/ivanmerkulov/Documents/GitHub/2109415-what-to-watch-3/frontend/src/pages/main-page/main-page.tsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport PromoCard from '../../components/promo-card/promo-card';\nimport Footer from '../../components/footer/footer';\nimport GenresList from '../../components/genres-list/genres-list';\nimport FilmsList from '../../components/films-list/films-list';\nimport ShowMoreButton from '../../components/show-more-button/show-more-button';\nimport Spinner from '../../components/spinner/spinner';\nimport { useAppSelector, useAppDispatch } from '../../hooks/';\nimport { getFilmsByGenre, getIsLoading as getFilmsByGenreIsLoading } from '../../store/genre-data/selectors';\nimport { getPromoFilm, getIsLoading as getPromoIsLoading } from '../../store/promo-data/selectors';\nimport { getActiveGenre } from '../../store/genre-data/selectors';\nimport { fetchFilmsByGenre, fetchPromo } from '../../store/api-actions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FILMS_PER_STEP = 8;\nfunction MainPage() {\n  _s();\n  const dispatch = useAppDispatch();\n  const isFilmsByGenreLoading = useAppSelector(getFilmsByGenreIsLoading);\n  const filmsByGenre = useAppSelector(getFilmsByGenre);\n  const isPromoLoading = useAppSelector(getPromoIsLoading);\n  const promoFilm = useAppSelector(getPromoFilm);\n  const activeGenre = useAppSelector(getActiveGenre);\n  const [filmsDisplayed, setFilmsDisplayed] = useState(0);\n  useEffect(() => {\n    dispatch(fetchPromo());\n  }, [dispatch]);\n  useEffect(() => {\n    dispatch(fetchFilmsByGenre(activeGenre));\n  }, [dispatch, activeGenre]);\n  useEffect(() => {\n    setFilmsDisplayed(Math.min(filmsByGenre.length, FILMS_PER_STEP));\n  }, [filmsByGenre]);\n  const handleShowMoButtonClick = () => {\n    setFilmsDisplayed(prevFilmsDisplayed => Math.min(filmsByGenre.length, prevFilmsDisplayed + FILMS_PER_STEP));\n  };\n  if (isPromoLoading || isFilmsByGenreLoading) {\n    return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [promoFilm && /*#__PURE__*/_jsxDEV(PromoCard, {\n      promoFilm: promoFilm\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"catalog\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"catalog__title visually-hidden\",\n          children: \"Catalog\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(GenresList, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FilmsList, {\n          films: filmsByGenre.slice(0, filmsDisplayed),\n          withVideo: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), filmsByGenre.length > filmsDisplayed && /*#__PURE__*/_jsxDEV(ShowMoreButton, {\n          onClick: handleShowMoButtonClick\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_s(MainPage, \"sa7fD/UcwQsrxImauEbgvfVGriE=\", false, function () {\n  return [useAppDispatch, useAppSelector, useAppSelector, useAppSelector, useAppSelector, useAppSelector];\n});\n_c = MainPage;\nexport default MainPage;\nvar _c;\n$RefreshReg$(_c, \"MainPage\");","map":{"version":3,"names":["useState","useEffect","PromoCard","Footer","GenresList","FilmsList","ShowMoreButton","Spinner","useAppSelector","useAppDispatch","getFilmsByGenre","getIsLoading","getFilmsByGenreIsLoading","getPromoFilm","getPromoIsLoading","getActiveGenre","fetchFilmsByGenre","fetchPromo","FILMS_PER_STEP","MainPage","dispatch","isFilmsByGenreLoading","filmsByGenre","isPromoLoading","promoFilm","activeGenre","filmsDisplayed","setFilmsDisplayed","Math","min","length","handleShowMoButtonClick","prevFilmsDisplayed","slice"],"sources":["/Users/ivanmerkulov/Documents/GitHub/2109415-what-to-watch-3/frontend/src/pages/main-page/main-page.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport PromoCard from '../../components/promo-card/promo-card';\nimport Footer from '../../components/footer/footer';\nimport GenresList from '../../components/genres-list/genres-list';\nimport FilmsList from '../../components/films-list/films-list';\nimport ShowMoreButton from '../../components/show-more-button/show-more-button';\nimport Spinner from '../../components/spinner/spinner';\nimport { useAppSelector, useAppDispatch } from '../../hooks/';\nimport {\n  getFilmsByGenre,\n  getIsLoading as getFilmsByGenreIsLoading,\n} from '../../store/genre-data/selectors';\nimport {\n  getPromoFilm,\n  getIsLoading as getPromoIsLoading,\n} from '../../store/promo-data/selectors';\nimport { getActiveGenre } from '../../store/genre-data/selectors';\nimport { fetchFilmsByGenre, fetchPromo } from '../../store/api-actions';\n\nconst FILMS_PER_STEP = 8;\n\nfunction MainPage() {\n  const dispatch = useAppDispatch();\n  const isFilmsByGenreLoading = useAppSelector(getFilmsByGenreIsLoading);\n  const filmsByGenre = useAppSelector(getFilmsByGenre);\n  const isPromoLoading = useAppSelector(getPromoIsLoading);\n  const promoFilm = useAppSelector(getPromoFilm);\n  const activeGenre = useAppSelector(getActiveGenre);\n  const [filmsDisplayed, setFilmsDisplayed] = useState(0);\n\n  useEffect(() => {\n    dispatch(fetchPromo());\n  }, [dispatch]);\n\n  useEffect(() => {\n    dispatch(fetchFilmsByGenre(activeGenre));\n  }, [dispatch, activeGenre]);\n\n  useEffect(() => {\n    setFilmsDisplayed(Math.min(filmsByGenre.length, FILMS_PER_STEP));\n  }, [filmsByGenre]);\n\n  const handleShowMoButtonClick = () => {\n    setFilmsDisplayed((prevFilmsDisplayed) =>\n      Math.min(filmsByGenre.length, prevFilmsDisplayed + FILMS_PER_STEP)\n    );\n  };\n\n  if (isPromoLoading || isFilmsByGenreLoading) {\n    return <Spinner />;\n  }\n\n  return (\n    <>\n      {promoFilm && <PromoCard promoFilm={promoFilm} />}\n      <div className=\"page-content\">\n        <section className=\"catalog\">\n          <h2 className=\"catalog__title visually-hidden\">Catalog</h2>\n\n          <GenresList />\n\n          <FilmsList films={filmsByGenre.slice(0, filmsDisplayed)} withVideo />\n          {filmsByGenre.length > filmsDisplayed && (\n            <ShowMoreButton onClick={handleShowMoButtonClick} />\n          )}\n        </section>\n\n        <Footer />\n      </div>\n    </>\n  );\n}\n\nexport default MainPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}